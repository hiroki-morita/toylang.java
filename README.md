# toylang.java

Java の習作として書いた，関数型のシンプルな言語です．

- 動的型付け（実行時にはじめて型検査を行う）
- 整数型，論理値型，関数型のみ使用可能
- 変数は基本的に不変（再代入不可）
  - `let x = e in ...` （`in` でつないでいく，OCaml ライク）
- 関数は `|arg1, ..., argn| => e` で定義
  - 自動的にカリー化される
  
サンプルプログラムは `src/programs` にあります．

## 実行方法

### REPL

Repl.java をコンパイル・実行してください．
`python` や `irb` のような対話的な環境でプログラムを実行できます．
プログラムを改行したいときは行末に `\`（バックスラッシュ）を入れてください．

### スクリプトの実行

Interpreter.java をコンパイル・実行してください．
プログラム中の `PROGRAM_NAME` で実行するファイルを指定します．
ソースファイルは `src/programs` 内に置いてください．

## 文法

### 四則演算

```
> 1 + 2
3
> 8 / 2
4
> (1 + -3) * (2 + 5)
-14
```

### 比較・論理演算

```
> 1 < 2 // 比較（小なり）
true
> (true or false) and false // 論理積
false
> 2 > 1 and 2 = 2 // 比較（大なり）・等価判定
true
```

### 条件分岐

```
> if 1 < 2 then 1 else 0
1
> if true then 1
1
> if false then 1
() // unit 型の値（null みたいな）
```

### 変数束縛

```
> let x = 10
10
> x * 2
20
> let n = 5 in // in でつなぐ \
... n + x
15
```

### 関数定義

```
> let add = |m, n| => // m と n の加算 \
... m + n
(関数型の値)
> add(5, 3)
8
> let add_rec = |m, n| => // m + n, with recursion \
... if m = 0 then n else add_rec(m-1, n+1)
(関数型の値)
> add_rec(5, 4)
9
```

## TODO

- [ ] 文字列型の実装
- [ ] 副作用のある関数（`print` 等）の実装
- [ ] 複文みたいな機能の実装
